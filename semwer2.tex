\documentclass[12pt]{article}

\usepackage{stmaryrd}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{setspace}
\newcommand{\sem}[1]{\llbracket #1 \rrbracket}
\newcommand{\srod}{\;\varrho_{V}, s}
\newcommand{\srodP}{\;\varrho_{V}, \varrho_{P}, s}
\newcommand{\PV}{\; \varrho_{V} \; \varrho_{P}}
\newcommand{\reg}[1]{\[ #1 \]}
\newcommand{\eq}[2]{\subsection{#1} \begin{gather*} #2 \end{gather*}}


\begin{document}

\begin{center}
	\Large{Semantyka i weryfikacja - praca domowa nr 2}
	\newline
	\large{Mateusz Bieganski mb385162}
\end{center}

% \begin{equation*}
% \end{equation*}

% TODO gather -> gather*
\section{Expressions}
\eq{e}{	
	\sem{e} \srodP = q \in \mathbb{Q}
}

\eq {x} {
	\sem{x} \srod = s \;(\varrho_{V} \; x)
}

\eq {e + e} {
	\sem{e_1 + e_2} \srod = \sem{e1} \srod + \sem{e2} \srod
}

\eq {e * e, e - e - analogicznie} {
\;
}

\section{Bool Expressions}
\eq {true} {
	\sem{true} \srod = tt
}

\eq {false} {
	\sem{false} \srod = ff
}

\eq {e $<$ e} {
	\sem{e_1 < e_2} \srod = ifte(\;\sem{e_1} \srod < \sem{e_2} \srod, \; tt, ff \;)
}

\eq {e = e, b $\wedge$ b, $\neg$b - analogicznie} {
	\;
}

\section{Declarations}
\eq {var x = e} {
	\sem{var \; x = e} \srodP = \varrho_{V}[x \mapsto l], \varrho_{P}, 
	s[l \mapsto n] \\
	where \; l = newloc(s), \; n = \sem{e} \srod
}

\eq {$\epsilon$} {
	\sem{\epsilon} \; \varrho_{V} = id_{P} 
}

\eq {proc p(x) I} {
	\sem{proc \; p(x) \;I} \PV  = \varrho_{P}[p \mapsto P] \\
	where \; P = \lambda.s:State.\sem{I} \; \varrho_{V} \; \varrho_{P}[p \mapsto P] \;s[l \mapsto \sem{s \; (\varrho_{V} \; x)}\srod], \\
	l = newloc(s)
}


\eq {$D_1; D_2$} {
	\sem{D_1; D_2} \PV = \sem{D_2} \varrho_P' \varrho_D' \\
	where \; \varrho_P' \; \varrho_D' = \sem{D_1} \PV
}


\section{Instructions}


\eq {skip} {
	\sem{skip} \srodP = \srodP
}

\eq {x := e} {
	\sem{x := e} \srodP = \PV \; s[(\varrho_V \; x) \mapsto \sem{e} \srod]
}

\eq {$I_1;I_2$} {
	\sem{I_1;I_2} = \sem{I_2} \circ \sem{I_1}
}

\eq {if $b$ then $I_1$ else $I_2$} {
	\sem{if\;b\;then\;I_1\;else\;I_2} \srodP = ifte(\sem{b}\srodP,\;\sem{I_1}\srodP, \sem{I_2}\srodP )
}


% todo punkt staly
\eq {while b do I} {
	\sem{while\;b\;do\;I} \srodP = ifte(\sem{b}\srodP, \sem{while\;b\;do\;I} (\sem{I} \srodP),\srodP)
}

\eq {begin D; I end} {
	\sem{begin\;D;\;I\;end} = TODO
}

\eq {call\;p(x)} {
	\sem{call\;p(x)} = TODO
}

\end{document}